{{#unless newItem}}
  <button onclick={{route-action "createNew" "address"}} class="fluid ui button"><i class="plus icon"></i> Add Address</button>
  {{#each model.addresses as |address index|}}
    <div class="ui vertical segment">
      <h4 class="ui header">Address {{add-number index 1}}</h4>
      <p>
        {{address.address}}<br />
        {{#if address.address_secondary}}
          {{address.address_secondary}}<br />
        {{/if}}
        {{address.city}}, {{address.state}} {{address.zip}}
      </p>
    </div>
  {{/each}}
{{else}}
  {{#cuppa-form onSubmit=(route-action "save") changeset=(changeset newItem AddressValidations) as |form|}}
    <div class="required field">
      <label>Address</label>
      {{input type="text" value=form.changeset.address}}
    </div>
    <div class="field">
      <label>Address Line 2</label>
      {{input type="text" value=form.changeset.address_secondary}}
    </div>
    <div class="fields">
      <div class="required eight wide field">
        <label>City</label>
        {{input type="text" value=form.changeset.city}}
      </div>
      <div class="required field">
        <label>State</label>
        {{#ui-dropdown class="search selection" selected=form.changeset.state onChange=(action (mut form.changeset.state)) as |execute mapper|}}
          <div class="default text">Choices</div>
          <i class="dropdown icon"></i>
          <div class="menu">
            {{#each usStates as |state|}}
              <div class="item" data-value="{{map-value mapper state.value}}">
                {{state.display}}
              </div>
            {{/each}}
          </div>
        {{/ui-dropdown}}
      </div>
      <div class="required five wide field">
        <label>Zip</label>
        {{input type="text" value=form.changeset.zip}}
      </div>
    </div>
  {{/cuppa-form}}
{{/unless}}